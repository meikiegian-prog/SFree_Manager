<!-- 首页 - 核心HCI：滑动切换模块、一站式工作流 -->
<view class="index-container">
  <!-- 滑动切换：项目/时间/收入 -->
  <swiper 
    class="module-swiper"
    current="{{activeTab}}" 
    bindchange="swiperChange" 
    duration="300"
  >
    <!-- 项目模块（核心） -->
    <swiper-item>
      <view class="project-module">
        <!-- 新建项目按钮 -->
        <button class="btn btn-primary add-project-btn" bindtap="addProject">
          + 新建项目
        </button>
        
        <!-- 项目卡片列表（条件滑动） -->
        <scroll-view 
          class="project-scroll"
          scroll-y="{{projectList.length >= 1}}"
          style="height: {{scrollHeight}}px"
        >
          <block wx:if="{{projectList.length}}">
            <project-card
              wx:for="{{projectList}}"
              wx:key="id"
              project="{{item}}"
              isTracking="{{timerData.isTracking}}"
              currentProjectId="{{timerData.currentProjectId}}"
              bind:toggleTimer="handleToggleTimer"
              bind:finishProject="handleFinishProject"
            />
          </block>
          
          <!-- 空状态 -->
          <view class="empty-tip" wx:else>
            暂无项目，点击上方按钮创建～
          </view>
        </scroll-view>
        
        <!-- 快速记录面板（下拉呼出） -->
        <record-panel
          showPanel="{{showRecordPanel}}"
          bind:closePanel="closeRecordPanel"
          bind:saveRecord="handleSaveRecord"
        />
      </view>
      <view class="record-trigger" bindtap="showRecordPanel" wx:if="{{showRecordTrigger}}">
       <text class="trigger-text">+ 快速记录</text>
      </view>
    </swiper-item>

    <!-- 时间模块 -->
    <swiper-item>
      <view class="time-module p-30">
        <view class="current-time">{{currentTime}}</view>
        <view class="time-tip">当前追踪时长（后台持续记录）</view>
        
        <!-- 正在计时的项目 -->
        <view class="tracking-project mt-20" wx:if="{{timerData.isTracking}}">
          正在追踪：{{trackingProjectName || '未知项目'}}
        </view>
      </view>
    </swiper-item>

    <!-- 收入模块 -->
    <swiper-item>
      <view class="income-module p-30">
        <view class="total-income">
          本月总收入：¥{{totalIncome}}
        </view>
        
        <!-- 跳转到数据统计页 -->
        <navigator url="/pages/statistics/statistics" class="go-statistics mt-20">
          <button class="btn btn-primary">
            查看数据可视化报表 →
          </button>
        </navigator>
      </view>
    </swiper-item>
  </swiper>
  
  <!-- 底部快速记录触发按钮 -->

</view>