<!-- 首页 - 核心HCI：滑动切换模块、一站式工作流 -->
<view class="index-container">
  <!-- 滑动切换：项目/时间/收入 -->
  <swiper 
    class="module-swiper"
    current="{{activeTab}}" 
    bindchange="swiperChange" 
    duration="300"
  >
    <!-- 项目模块（核心） -->
    <swiper-item>
      <view class="project-module">
        <!-- 新建项目按钮 -->
        <button class="btn btn-primary add-project-btn" bindtap="addProject">
          + 新建项目
        </button>
        
        <!-- 项目卡片列表（条件滑动） -->
        <scroll-view 
          class="project-scroll"
          scroll-y="{{projectList.length >= 1}}"
          style="height: {{scrollHeight}}px"
        >
          <block wx:if="{{projectList.length}}">
            <project-card
              wx:for="{{projectList}}"
              wx:key="id"
              project="{{item}}"
              trackingProjects="{{trackingProjects}}"
              bind:toggleTimer="handleToggleTimer"
              bind:finishProject="handleFinishProject"
              bind:deleteProject="onDeleteProject"
            />
          </block>
          
          <!-- 空状态 -->
          <view class="empty-tip" wx:else>
            暂无项目，点击上方按钮创建～
          </view>
        </scroll-view>
        
        <!-- 快速记录面板（下拉呼出） -->
        <record-panel
          showPanel="{{showRecordPanel}}"
          bind:closePanel="closeRecordPanel"
          bind:saveRecord="handleSaveRecord"
        />
      </view>
      <view class="record-trigger" bindtap="showRecordPanel" wx:if="{{showRecordTrigger}}">
       <text class="trigger-text">+ 快速记录</text>
      </view>
    </swiper-item>

    <!-- 时间模块 - 追踪项目展示 -->
    <swiper-item>
      <view class="time-module">
        <!-- 模块标题 -->
        <view class="module-header">
          <text class="module-title">追踪中的项目</text>
          <text class="module-subtitle" wx:if="{{trackingProjectsWithFullData.length}}">
            共{{trackingProjectsWithFullData.length}}个项目正在追踪
          </text>
        </view>
        
        <!-- 追踪项目列表 -->
        <scroll-view 
          class="tracking-projects-scroll"
          scroll-y="{{true}}"
          style="height: {{scrollHeight}}px"
        >
          <view class="tracking-projects-list" wx:if="{{trackingProjectsWithFullData.length}}">
            <tracking-project-card 
              wx:for="{{trackingProjectsWithFullData}}" 
              wx:key="id"
              project="{{item}}"
              bind:priorityChange="onPriorityChange"
              bind:toggleTracking="onToggleTracking"
            />
          </view>
          
          <!-- 无追踪项目提示 -->
          <view class="no-tracking" wx:else>
            <view class="no-tracking-icon">⏱️</view>
            <text class="no-tracking-text">暂无正在追踪的项目</text>
            <text class="no-tracking-tip">在项目页面点击"开始追踪"按钮开始计时</text>
          </view>
        </scroll-view>
      </view>
    </swiper-item>

    <!-- 收入模块 -->
    <swiper-item>
      <view class="income-module p-30">
        <view class="total-income">
          本月总收入：¥{{totalIncome}}
        </view>
        
        <!-- 跳转到数据统计页 -->
        <navigator url="/pages/statistics/statistics" class="go-statistics mt-20">
          <button class="btn btn-primary">
            查看数据可视化报表 →
          </button>
        </navigator>
      </view>
    </swiper-item>
  </swiper>
  
  <!-- 底部快速记录触发按钮 -->

</view>